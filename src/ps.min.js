(function(m,e){if(void 0===e)throw"jQuery is needed";var k=1,n=Math.floor(5E5*Math.random()),p=function(a){var c,b,l="";a=a.toString();for(c=0;c<a.length;c+=1)b=a.charCodeAt(c).toString(16),l+=("000"+b).slice(-4);return"event"+n+l},h=e({}),b={},f={},d=function(a,c){var g;if(!a)throw"Namespace must be defined";if(e.isFunction(c)){if(e.isFunction(f[a]))throw"Module cannot be redefined";f[a]=c}else{if(e.isFunction(f[a]))return g=d.global(a,k),k+=1,b[a]=b[a]||[],b[a].push(g),e.isArray(c)&&c.length?f[a].apply(g,
    c):f[a].call(g),g;throw"The constructor for "+a+" has not been defined";}};d.global=function(a,c){if(!(this instanceof d.global))return new d.global(a,c);this.___namespace=a||"";this.___instance=c||"";this.___events=[];this.___killed=!1};d.destroyAll=function(a){var c;if(void 0===a)b=[],f=[];else{if(b[a]){if(b[a].length)for(c=0;c<b[a].length;c+=1)b[a][c].___killed=!0,b[a][c].off("*");delete b[a]}f[a]&&delete f[a]}};d.findAll=function(a){if(!(this instanceof d.findAll))return new d.findAll(a);this.___namespace=
    a;this.length=e.isArray(b[this.___namespace])?b[this.___namespace].length:0};e.each(["on","one","off","trigger"],function(a,c){d.global.prototype[c]=function(){var a,b,d;if(!1===this.___killed)if(a=this,b=e.makeArray(arguments),d=p(this.___namespace+this.___instance+"_"+b[0]),"on"===c||"one"===c){if(!e.isFunction(b[1]))throw"Events '"+b[0]+"' needs a callback";a.___events.push(d);h[c](d,function(){var c=e.makeArray(arguments).slice(1)||[];b[1].apply(a,c)})}else"off"===c&&"*"===b[0]&&this.___events?
    h.off(this.___events.join(" ")):(d=e.isArray(b[1])&&b[1].length?[d].concat([b[1]]):[d],h[c].apply(h,d));return this};d.findAll.prototype[c]=function(){var a=e.makeArray(arguments),d;for(d=0;d<this.length;d+=1)b[this.___namespace][d][c].apply(b[this.___namespace][d],a);return this}});d.global.prototype.destroy=function(){var a;this.___killed=!0;this.off("*");if(this.___instance&&b[this.___namespace])for(a=0;a<b[this.___namespace].length;a+=1)b[this.___namespace][a]===this&&(1===length?delete b[this.___namespace]:
    (a!==length-1&&(b[this.___namespace][a]=b[this.___namespace][length-1]),b[this.___namespace].pop()));return this};d.global.prototype.connect=function(a){var c=this,b;for(b in a)if(a.hasOwnProperty(b))c.on(b,function(){c.trigger(a[b])});return this};m.P$=d})(window,window.jQuery);
